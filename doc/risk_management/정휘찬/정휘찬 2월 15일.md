# 정휘찬

날짜: 2023년 2월 15일
느낀점: 이번 캠프에서 내가 배운 전공 지식들의 활용, 그리고 그것들의 필요를 많이 느꼈다. 특히 소프트웨어 공학은 허울 뿐인 과목이 아닐까 생각했었는데 이 정도로 개발에 직접적인 영향을 끼칠지 몰랐다. 그동안 전공 공부, 언어 공부를 하며 그래도 막상 나중에 개발을 하면 잘하지 않을까? 공부를 많이 했으니 개발도 쉽게 할 수 있지 않을까? 생각했었다. 하지만 직접 밑바닥부터 개발을 해보니 생각처럼 쉽지 않았다. 만들 시스템에 대한 이해부터 설계, 구현을 할 때 생기는 예외들, 개발 경험이 없다 보니, 생각보다 간단한 문제들도 원인을 찾고 해결하는데 시간이 오래걸렸다. 이 이슈를 처리하면서 또 든 생각은 개발의 경험을 축적시킬 필요가 있다는 것이다.  원인을 찾는 방법도 오래 걸렸고(중단점과 f10, f11, 메모리 창 확인, 조사식), 캠프장님이 중간 코드 리뷰 때 얘기하신 예외처리의 필요성도 알게 되었다. 

그리고 너무 문제에 매몰되는 것의 위험 또한 알게 되었다. 밤 10시 부터 문제를 해결하기 위해 새벽 4시 까지 작업을 하였는데, 다음 날 일어나 밥을 먹고 팀원들과 이야기 하다보니 문제의 해결법이 떠올랐다. 너무 개발에 긴장감만 주지 말고 가끔씩 이완해주며 휴식, 환기의 필요성을 느꼈다.
발생이유: 하나의 클래스가 하나의 책임을 갖지 않아, User 객체를 Room , PacketHandler, Game, GameSession 클래스에서 접근했다. 그래서 각자의 객체가 가진 락을 가진 상태에서 그대로 다른 객체의 락을 가지려고 시도하니 데드락이 걸려서 예외가 발생했다.
위험도: 시간(2), 범위(1), 빈도(3)
위험정의: 락을 사용하다가 문제가 생겼는데 원인을 찾는 데에 시간이 너무 많이 소모되었다.
해결방법: 디버그, 예외처리문을 활용해서 원인을 찾은 뒤 ,리팩토링을 통해서 저 네 가지의 클래스를 모두 뜯어 고쳤다. User의 관리는 Game만 하고 PacketHandler는 패킷 처를 할 때 Game 클래스와 인터페이스를 통해서 처리했다. Session은 User를 직접 다루는 대신에 UserID를 갖고 필요한 작업을 PakcetHandler를 통해 요청했다. 마지막으로 Room은 클라이언트의 입장과 퇴장, 브로드캐스팅만 전담하게 하여 여러갈래로 꼬인 구조가 되지않게 하였다