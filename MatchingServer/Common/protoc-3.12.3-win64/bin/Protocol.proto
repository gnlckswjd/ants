syntax = "proto3";

package Protocol;
import "google/protobuf/timestamp.proto";
option csharp_namespace = "Google.Protobuf.Protocol";


enum UserState
{
    IDLE = 0;
    MOVE = 1;
    Attack = 2;
    DEAD = 3;
}

enum Direction
{
    UP = 0;
    DOWN = 1;
    LEFT = 2;
    RIGHT = 3;
    UP_LEFT=4;
    UP_RIGHT=5;
    DOWN_LEFT=6;
    DOWN_RIGHT=7;
    NONE=8;
}

enum MsgId {
    empty = 0;

    M_INITROOM = 1000;
    S_ROOMCOMPLETED = 1001;
    
    M_TEST = 1999;

    C_ENTERROOM = 2000;
    S_STARTGAME = 2001;

    C_USERINFO = 2002;
    S_USERINFO = 2003;

    C_MOVE = 2004;
    S_MOVE = 2005;
    S_MOVEADVANCED = 2105;

    C_ATTACK = 2006;
    S_ATTACK = 2007;

    C_ATTACKED = 2008;
    S_ATTACKED = 2009;

    S_DEAD = 2010;
    S_GAMEEND = 2011;

    C_TEST = 2999;
  }

//------게임 서버----------

message C_Userinfo
{
    uint32 userID=1;
    string name=2;
    UserState state=3;
    uint32 hp=4;
    Moveinfo moveInfo=5;
}
message S_Userinfo
{
    uint32 userID=1;
    string name=2;
    UserState state=3;
    uint32 hp=4;
    Moveinfo moveInfo=5;
}

message Moveinfo
{
    Direction direction=1;
    float positionX=2;
    float positionY=3;
}


// 매칭 서버 관련
message M_Test
{
    string msg=1;
}

message M_Initroom
{
    uint32 roomID=1;
    repeated uint32 userID=2;
}

message S_Roomcompleted
{
    uint32 roomID=1;
    bool isCompleted = 2;
}

// 클라이언트 관련
message C_Test
{
    string msg=1;
}

message C_Enterroom
{
    uint32 userID=1;
    uint32 roomID=2;
    string name=3;
}

message S_Startgame
{
    repeated S_Userinfo user=1;
}

message S_Gameend 
{
    uint32 userID=1;
}

message C_Move
{
    Moveinfo moveinfo=1;
}

message S_Move
{
    uint32 userID=1;
    Moveinfo moveinfo=2;
}

message S_Moveadvanced
{
    repeated S_Move move=1;
}

message C_Attack
{
    float directionX=1;
    float directionY=2;
}

message S_Attack
{
    uint32 userID=1;
    float directionX=2;
    float directionY=3;
}

message C_Attacked
{
    uint32 userID=1;
}

message S_Attacked
{
    repeated uint32 userID=1;
}

message S_Dead
{
    repeated uint32 userID=1;
}    